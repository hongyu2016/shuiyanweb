{
    "version": 3,
    "sources": [
        "..\\..\\..\\src\\api\\controller\\contact.js"
    ],
    "names": [
        "Base",
        "require",
        "module",
        "exports",
        "indexAction",
        "addAction",
        "isPost",
        "email",
        "post",
        "name",
        "content",
        "emailReg",
        "json",
        "success",
        "errmsg",
        "data",
        "test",
        "length",
        "contact_id",
        "model",
        "add",
        "think",
        "datetime"
    ],
    "mappings": ";;AAAA,MAAMA,OAAOC,QAAQ,WAAR,CAAb;;AAEAC,OAAOC,OAAP,GAAiB,cAAcH,IAAd,CAAmB;AAC7BI,YAAN,GAAoB;AAAA;AAEhB;AACKC,UAAN,GAAiB;AAAA;;AAAA;AACnB,OAAG,MAAKC,MAAR,EAAe;AACd,QAAIC,QAAM,MAAKC,IAAL,CAAU,OAAV,CAAV;AACA,QAAIC,OAAK,MAAKD,IAAL,CAAU,MAAV,CAAT;AACA,QAAIE,UAAQ,MAAKF,IAAL,CAAU,SAAV,CAAZ;AACA,QAAIG,WAAS,+EAAb;AACA,QAAG,CAACJ,KAAD,IAAU,CAACE,IAAX,IAAmB,CAACC,OAAvB,EAA+B;AAC9B,WAAKE,IAAL,CAAU;AACTC,eAAQ,IADC;AAETC,cAAO,iBAFE;AAGTC,YAAK;AAHI,MAAV;AAKA,YAAO,KAAP;AACA;AACD,QAAG,CAACJ,SAASK,IAAT,CAAcT,KAAd,CAAJ,EAAyB;AACxB,WAAKK,IAAL,CAAU;AACTC,eAAQ,IADC;AAETC,cAAO,YAFE;AAGTC,YAAK;AAHI,MAAV;AAKA,YAAO,KAAP;AACA;AACD,QAAGN,KAAKQ,MAAL,GAAY,EAAZ,IAAgBP,QAAQO,MAAR,GAAe,GAAlC,EAAsC;AACrC,WAAKL,IAAL,CAAU;AACTC,eAAQ,IADC;AAETC,cAAO,aAFE;AAGTC,YAAK;AAHI,MAAV;AAKA,YAAO,KAAP;AACA;AACD,QAAIG,aAAW,MAAM,MAAKC,KAAL,CAAW,SAAX,EACpBC,GADoB,CAChB;AACJ,sBAAgBb,KADZ;AAEJ,qBAAeE,IAFX;AAGJ,wBAAkBC,OAHd;AAIJ,oBAAcW,MAAMC,QAAN;AAJV,KADgB,CAArB;AAOA,QAAGJ,UAAH,EAAc;AACb,WAAKN,IAAL,CAAU;AACTC,eAAQ,IADC;AAETC,cAAO,MAFE;AAGTC,YAAKG;AAHI,MAAV;AAKA,KAND,MAMK;AACJ,WAAKN,IAAL,CAAU;AACTC,eAAQ,IADC;AAETC,cAAO,MAFE;AAGTC,YAAK;AAHI,MAAV;AAKA;AACD,IAjDD,MAiDK;AACJ,UAAKH,IAAL,CAAU;AACTC,cAAQ,IADC;AAETC,aAAO,aAFE;AAGTC,WAAK;AAHI,KAAV;AAKA;AAxDkB;AA0DhB;AA9D+B,CAApC",
    "file": "..\\..\\..\\src\\api\\controller\\contact.js",
    "sourcesContent": [
        "const Base = require('./base.js');\n\nmodule.exports = class extends Base {\n\tasync indexAction() {\n\n    }\n    async addAction(){\n\t\tif(this.isPost){\n\t\t\tlet email=this.post('email');\n\t\t\tlet name=this.post('name');\n\t\t\tlet content=this.post('content');\n\t\t\tlet emailReg=/^[a-z0-9]+([._\\\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/;\n\t\t\tif(!email || !name || !content){\n\t\t\t\tthis.json({\n\t\t\t\t\tsuccess:true,\n\t\t\t\t\terrmsg:'邮箱地址或姓名或内容都不能为空',\n\t\t\t\t\tdata:[]\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif(!emailReg.test(email)){\n\t\t\t\tthis.json({\n\t\t\t\t\tsuccess:true,\n\t\t\t\t\terrmsg:'请输入合法的邮箱地址',\n\t\t\t\t\tdata:[]\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif(name.length>10||content.length>230){\n\t\t\t\tthis.json({\n\t\t\t\t\tsuccess:true,\n\t\t\t\t\terrmsg:'姓名或者内容超过了长度',\n\t\t\t\t\tdata:[]\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tlet contact_id=await this.model('contact')\n\t\t\t.add({\n\t\t\t\t'contact_email':email,\n\t\t\t\t'contact_name':name,\n\t\t\t\t'contact_content':content,\n\t\t\t\t'create_time':think.datetime()\n\t\t\t});\n\t\t\tif(contact_id){\n\t\t\t\tthis.json({\n\t\t\t\t\tsuccess:true,\n\t\t\t\t\terrmsg:'提交成功',\n\t\t\t\t\tdata:contact_id\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tthis.json({\n\t\t\t\t\tsuccess:true,\n\t\t\t\t\terrmsg:'提交失败',\n\t\t\t\t\tdata:[]\n\t\t\t\t});\n\t\t\t}\n\t\t}else{\n\t\t\tthis.json({\n\t\t\t\tsuccess:true,\n\t\t\t\terrmsg:'请使用post方式提交',\n\t\t\t\tdata:[]\n\t\t\t});\n\t\t}\n\n    }\n};\n"
    ]
}