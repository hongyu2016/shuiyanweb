{
    "version": 3,
    "sources": [
        "..\\..\\..\\src\\admin\\controller\\notice.js"
    ],
    "names": [
        "pagination",
        "require",
        "Base",
        "module",
        "exports",
        "indexAction",
        "pageIndex",
        "get",
        "data",
        "model",
        "list",
        "page_data",
        "ctx",
        "desc",
        "pageNum",
        "url",
        "class",
        "text",
        "next",
        "prev",
        "total",
        "assign",
        "display",
        "addAction",
        "id",
        "where",
        "find",
        "doaddAction",
        "isPost",
        "postData",
        "post",
        "edit",
        "list_id",
        "addRecord",
        "json",
        "success",
        "errmsg",
        "editRecord",
        "deleteAction",
        "isGet",
        "listRecord",
        "deleteRecord"
    ],
    "mappings": "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",
    "file": "..\\..\\..\\src\\admin\\controller\\notice.js",
    "sourcesContent": [
        "/**\r\n * Created by Administrator on 2018/1/15.\r\n */\r\nconst pagination = require('think-pagination');\r\nconst Base = require('./base.js');\r\nmodule.exports = class extends Base {\r\n\tasync indexAction(){\r\n\t\tlet pageIndex=this.get('page');\r\n\t\tconst data = await this.model('notice').list(pageIndex);\r\n\t\tconst page_data = pagination(data, this.ctx, {\r\n\t\t\tdesc: false, //show description\r\n\t\t\tpageNum: 2,\r\n\t\t\turl: '', //page url, when not set, it will auto generated\r\n\t\t\tclass: '', //pagenation extra class\r\n\t\t\ttext: {\r\n\t\t\t\tnext: '下一页',\r\n\t\t\t\tprev: '上一页',\r\n\t\t\t\ttotal: 'count: __COUNT__ , pages: __PAGE__'\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.assign({'pagination':page_data,'notice_list':data.data});\r\n\t\treturn this.display();\r\n\t}\r\n\tasync addAction(){\r\n\t\tlet id=this.get('notice-id');\r\n\t\tif(id){//有文章id 则是编辑页面 从news表根据id查询数据\r\n\t\t\tlet data=await this.model('notice').where({'notice_id':id}).find();\r\n\t\t\tthis.assign('data',data);\r\n\t\t}\r\n\t\treturn this.display();\r\n\t}\r\n\t/*\r\n\t* 添加\r\n\t* */\r\n\tasync doaddAction(){\r\n\t\tif(this.isPost){\r\n\t\t\tlet postData=this.post();\r\n\r\n\t\t\tif(postData.edit=='0' ||　postData.edit==0){\r\n\t\t\t\tlet list_id=await this.model('notice').addRecord(postData);\r\n\t\t\t\tif(list_id){\r\n\t\t\t\t\tthis.json({\r\n\t\t\t\t\t\tsuccess:true,\r\n\t\t\t\t\t\terrmsg:'添加公告成功',\r\n\t\t\t\t\t\tdata:{\r\n\t\t\t\t\t\t\tid:list_id\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.json({\r\n\t\t\t\t\t\tsuccess:true,\r\n\t\t\t\t\t\terrmsg:'添加公告失败',\r\n\t\t\t\t\t\tdata:[]\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tlet list_id=await this.model('notice').editRecord(postData);\r\n\t\t\t\tif(list_id){\r\n\t\t\t\t\tthis.json({\r\n\t\t\t\t\t\tsuccess:true,\r\n\t\t\t\t\t\terrmsg:'修改公告成功',\r\n\t\t\t\t\t\tdata:{\r\n\t\t\t\t\t\t\tid:list_id\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.json({\r\n\t\t\t\t\t\tsuccess:true,\r\n\t\t\t\t\t\terrmsg:'修改公告失败',\r\n\t\t\t\t\t\tdata:[]\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\t/*\r\n\t* 删除\r\n\t* */\r\n\tasync deleteAction(){\r\n\t\tif(this.isGet){\r\n\t\t\tlet id=this.get('news-id');\r\n\t\t\tlet listRecord=await this.model('notice').deleteRecord(id);\r\n\t\t\tif(listRecord){\r\n\t\t\t\tthis.json({\r\n\t\t\t\t\tsuccess:true,\r\n\t\t\t\t\terrmsg:'删除公告成功',\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\tid:listRecord\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tthis.json({\r\n\t\t\t\t\tsuccess:true,\r\n\t\t\t\t\terrmsg:'删除公告失败',\r\n\t\t\t\t\tdata:[]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n"
    ]
}