{
    "version": 3,
    "sources": [
        "..\\..\\..\\src\\admin\\controller\\news.js"
    ],
    "names": [
        "_asyncToGenerator",
        "fn",
        "gen",
        "apply",
        "arguments",
        "Promise",
        "resolve",
        "reject",
        "step",
        "key",
        "arg",
        "info",
        "value",
        "error",
        "done",
        "then",
        "err",
        "ThinkUeditor",
        "require",
        "pagination",
        "Base",
        "module",
        "exports",
        "constructor",
        "args",
        "modelInstance",
        "model",
        "indexAction",
        "_this",
        "pageIndex",
        "get",
        "data",
        "indexList",
        "html",
        "ctx",
        "desc",
        "pageNum",
        "url",
        "class",
        "text",
        "next",
        "prev",
        "total",
        "assign",
        "display",
        "addAction",
        "_this2",
        "sortList",
        "select",
        "newsId",
        "newsData",
        "where",
        "find",
        "uploadAction",
        "ueditor",
        "json",
        "init",
        "doaddAction",
        "_this3",
        "isPost",
        "editId",
        "post",
        "sort",
        "title",
        "subTitle",
        "intro",
        "author",
        "content",
        "copyfrom",
        "fail",
        "artitleId",
        "editNews",
        "success",
        "addArticle",
        "deleteAction",
        "_this4",
        "isGet",
        "dataId",
        "delete"
    ],
    "mappings": "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",
    "file": "..\\..\\..\\src\\admin\\controller\\news.js",
    "sourcesContent": [
        "function _asyncToGenerator(fn) {\n    return function () {\n        var gen = fn.apply(this, arguments);return new Promise(function (resolve, reject) {\n            function step(key, arg) {\n                try {\n                    var info = gen[key](arg);var value = info.value;\n                } catch (error) {\n                    reject(error);return;\n                }if (info.done) {\n                    resolve(value);\n                } else {\n                    return Promise.resolve(value).then(function (value) {\n                        step(\"next\", value);\n                    }, function (err) {\n                        step(\"throw\", err);\n                    });\n                }\n            }return step(\"next\");\n        });\n    };\n}\n\nconst ThinkUeditor = require('think-ueditor');\nconst pagination = require('think-pagination');\nconst Base = require('./base.js');\n\nmodule.exports = class extends Base {\n    /*\n     * 构造函数 便于使用model文件\n     * */\n    constructor(...args) {\n        super(...args); //调用父级的 constructor 方法\n        this.modelInstance = this.model('news'); //增加一个方法\n    }\n    /*文章列表*/\n    indexAction() {\n        var _this = this;\n\n        return _asyncToGenerator(function* () {\n            //分页查询列表\n            let pageIndex = _this.get('page');\n            const data = yield _this.modelInstance.indexList(pageIndex); ////  两个表的字段重复了\n            const html = pagination(data, _this.ctx, {\n                desc: false, //show description\n                pageNum: 2,\n                url: '', //page url, when not set, it will auto generated\n                class: '', //pagenation extra class\n                text: {\n                    next: '下一页',\n                    prev: '上一页',\n                    total: 'count: __COUNT__ , pages: __PAGE__'\n                }\n            });\n            _this.assign({ 'pagination': html, 'news_list': data });\n\n            return _this.display();\n        })();\n    }\n    /*\n    * 发布新闻显示页面\n    * */\n    addAction() {\n        var _this2 = this;\n\n        return _asyncToGenerator(function* () {\n            let sortList = yield _this2.model('news_sort').select();\n            _this2.assign('sortList', sortList);\n            let newsId = _this2.get('news-id');\n            if (newsId) {\n                //有文章id 则是编辑页面 从news表根据id查询数据\n                let newsData = yield _this2.modelInstance.where({ 'article_id': newsId }).find();\n                _this2.assign('newsData', newsData);\n            }\n            return _this2.display();\n        })();\n    }\n    uploadAction() {\n        //百度编辑器\n        const ueditor = new ThinkUeditor(this.ctx);\n        this.json(ueditor.init());\n    }\n    /*\n    * 提交新增/编辑文章\n    * */\n    doaddAction() {\n        var _this3 = this;\n\n        return _asyncToGenerator(function* () {\n            if (_this3.isPost) {\n                let editId = _this3.post('editId');\n                let sort = _this3.post('sort');\n                let title = _this3.post('title');\n                let subTitle = _this3.post('subTitle');\n                let intro = _this3.post('intro');\n                let author = _this3.post('author');\n                let content = _this3.post('content');\n                let copyfrom = _this3.post('copyfrom');\n                if (!sort || sort == '') {\n                    _this3.fail(403, '文章分类不能为空');\n                    return false;\n                }\n                if (!title || title == '') {\n                    _this3.fail(403, '文章标题不能为空');\n                    return false;\n                }\n                if (!content || content == '') {\n                    _this3.fail(403, '文章内容不能为空');\n                    return false;\n                }\n                let data = {\n                    sort: sort,\n                    title: title,\n                    subTitle: subTitle,\n                    intro: intro,\n                    author: author,\n                    content: content,\n                    copyfrom: copyfrom\n                };\n\n                if (editId) {\n                    //编辑文章\n                    let artitleId = yield _this3.modelInstance.where({ 'article_id': editId }).editNews(data);\n                    if (!artitleId) {\n                        _this3.fail(403, '编辑文章失败');\n                    } else {\n                        _this3.success({ data: artitleId }, '编辑文章成功');\n                    }\n                } else {\n                    //新增文章\n                    let artitleId = yield _this3.modelInstance.addArticle(data);\n                    if (!artitleId) {\n                        _this3.fail(403, '添加文章失败');\n                    } else {\n                        _this3.success({ data: artitleId }, '添加文章成功');\n                    }\n                }\n            }\n        })();\n    }\n    /*\n    * 删除文章\n    * */\n    deleteAction() {\n        var _this4 = this;\n\n        return _asyncToGenerator(function* () {\n            if (_this4.isGet) {\n                let newsId = _this4.get('news-id');\n                let dataId = yield _this4.modelInstance.where({ 'article_id': newsId }).delete();\n                if (!dataId) {\n                    _this4.fail(403, '删除文章失败');\n                } else {\n                    _this4.success({ data: dataId }, '删除文章成功');\n                }\n            }\n        })();\n    }\n};"
    ]
}