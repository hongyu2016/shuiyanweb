{
    "version": 3,
    "sources": [
        "..\\..\\..\\src\\admin\\controller\\admin.js"
    ],
    "names": [
        "module",
        "exports",
        "think",
        "Controller",
        "indexAction",
        "display",
        "captchaAction",
        "options",
        "size",
        "ignoreChars",
        "noise",
        "color",
        "background",
        "width",
        "height",
        "fontSize",
        "charPreset",
        "captcha",
        "c",
        "create",
        "success",
        "loginAction",
        "isPost",
        "username",
        "post",
        "password",
        "data",
        "model",
        "where",
        "admin_name",
        "admin_pass",
        "find",
        "isEmpty",
        "fail",
        "session",
        "logoutAction",
        "redirect"
    ],
    "mappings": "AAAA;;;;;;;;AAEAA,OAAOC,OAAP,GAAiB,cAAcC,MAAMC,UAApB,CAA+B;AAC9CC,kBAAc;AACV,eAAO,KAAKC,OAAL,EAAP;AACH;AACD;;;AAGEC,oBAAe;AACX,cAAMC,UAAU;AACZC,kBAAM,CADM,EACH;AACTC,yBAAa,EAFD,EAEK;AACjBC,mBAAO,CAHK,EAGF;AACVC,mBAAO,KAJK,EAIE;AACdC,wBAAY,SALA,EAKW;AACvBC,mBAAO,EANK,EAMD;AACXC,oBAAQ,EAPI,EAOA;AACZ;AACAC,sBAAU,EATE,EASE;AACdC,wBAAY,gEAVA,CAUiE;AAVjE,SAAhB;AAYA,YAAIC,UAAQ,8BAAoBV,OAApB,CAAZ;AACA,YAAIW,IAAED,QAAQE,MAAR,EAAN,CAdW,CAca;AACxB,aAAKC,OAAL,CAAa,EAACH,SAAQC,CAAT,EAAb,EAAyB,SAAzB;AACH;;AAEH;;;AAGMG,eAAN,GAAmB;AAAA;;AAAA;AAChB,gBAAG,MAAKC,MAAR,EAAe;AACX,oBAAIC,WAAS,MAAKC,IAAL,CAAU,UAAV,CAAb,CADW,CACyB;AACpC,oBAAIC,WAAS,MAAKD,IAAL,CAAU,UAAV,CAAb,CAFW,CAEyB;AACpC,oBAAIE,OAAK,MAAM,MAAKC,KAAL,CAAW,OAAX,EAAoBC,KAApB,CAA0B,EAACC,YAAWN,QAAZ,EAAqBO,YAAWL,QAAhC,EAA1B,EAAqEM,IAArE,EAAf,CAHW,CAGiF;AAC5F,oBAAG7B,MAAM8B,OAAN,CAAcN,IAAd,CAAH,EAAuB;AACnB,2BAAO,MAAKO,IAAL,CAAU,GAAV,EAAc,cAAd,CAAP,CADmB,CACkB;AACxC,iBAFD,MAEK;AACD,0BAAKC,OAAL,CAAa,UAAb,EAAwBR,IAAxB;AACA;AACA;AACA,0BAAKN,OAAL,CAAa,EAACG,UAASA,QAAV,EAAb,EAAiC,MAAjC;AAEH;AACJ;AACD;AAfgB;AAgBlB;AACC;;;AAGMY,gBAAN,GAAoB;AAAA;;AAAA;AAChB,kBAAM,OAAKD,OAAL,CAAa,IAAb,CAAN;AACA,mBAAKE,QAAL,CAAc,cAAd,EAFgB,CAEc;AAFd;AAGnB;AAnD2C,CAAhD",
    "file": "..\\..\\..\\src\\admin\\controller\\admin.js",
    "sourcesContent": [
        "import ThinkSvgCaptcha from 'think-svg-captcha';\r\n\r\nmodule.exports = class extends think.Controller {\r\n  indexAction() {\r\n      return this.display();\r\n  }\r\n  /*\r\n  * 验证码\r\n  * */\r\n    captchaAction(){\r\n        const options = {\r\n            size: 4, // size of random string\r\n            ignoreChars: '', // filter out some characters\r\n            noise: 1, // number of noise lines\r\n            color: false, // default grey, true if background option is set\r\n            background: '#ffffff', // background color of the svg image\r\n            width: 80, // width of captcha\r\n            height: 35, // height of captcha\r\n            //fontPath: './fonts/Comismsh.ttf', // your font path\r\n            fontSize: 50, // captcha text size\r\n            charPreset: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789' // random character preset\r\n        };\r\n        let captcha=new ThinkSvgCaptcha(options);\r\n        let c=captcha.create(); // returns an object that has the following property: {data: 'svg path data', text: 'captcha text'}\r\n        this.success({captcha:c},'获取验证码成功');\r\n    }\r\n\r\n  /*\r\n  * 登陆\r\n  * */\r\n  async loginAction(){\r\n     if(this.isPost){\r\n         let username=this.post('username'); //获取用户名\r\n         let password=this.post('password'); //获取密码\r\n         let data=await this.model('admin').where({admin_name:username,admin_pass:password}).find(); //查询数据库\r\n         if(think.isEmpty(data)){\r\n             return this.fail(403,'账号密码错误！请重新填写');//登陆失败\r\n         }else{\r\n             this.session('userinfo',data);\r\n             //return this.redirect('/index/index');//登陆成功 存入session 跳转首页\r\n             //this.success({errmsg: \"登陆成功\", data: {username:username}});\r\n             this.success({username:username},'登陆成功');\r\n\r\n         }\r\n     }\r\n     //return this.display();\r\n  }\r\n    /**\r\n     * 注销\r\n     */\r\n    async logoutAction(){\r\n        await this.session(null);\r\n        this.redirect('/index/index');//登录成功将用户信息写入session，返回到user首页。\r\n    }\r\n};\r\n"
    ]
}